import{g as b}from"./assets/chunk-de833af9.js";var l=Object.defineProperty,v=Object.defineProperties,w=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,h=(t,e,r)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x=(t,e)=>{for(var r in e||(e={}))g.call(e,r)&&h(t,r,e[r]);if(d)for(var r of d(e))k.call(e,r)&&h(t,r,e[r]);return t},P=(t,e)=>v(t,O(e)),M=(t,e)=>{for(var r in e)l(t,r,{get:e[r],enumerable:!0})},S=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of T(e))!g.call(t,i)&&i!==r&&l(t,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return t},R=t=>S(l({},"__esModule",{value:!0}),t),m=(t,e,r)=>new Promise((o,i)=>{var p=s=>{try{u(r.next(s))}catch(n){i(n)}},c=s=>{try{u(r.throw(s))}catch(n){i(n)}},u=s=>s.done?o(s.value):Promise.resolve(s.value).then(p,c);u((r=r.apply(t,e)).next())}),y={};M(y,{default:()=>E});var D=R(y);function H(){return m(this,null,function*(){var t,e;const r=document.currentScript;if(!r)return;const o={include_urls:((t=r.getAttribute("include-urls"))==null?void 0:t.split(",").map(i=>i.trim()))||["/**"],exclude_urls:((e=r.getAttribute("exclude-urls"))==null?void 0:e.split(",").map(i=>i.trim()))||[],burke_id:r.getAttribute("burke-id")||"",api_endpoint:r.getAttribute("api-endpoint")||"",callback:void 0};o.burke_id&&o.api_endpoint&&L(o)})}function L(t){const e=P(x({},t),{include_urls:t.include_urls||["/**"],exclude_urls:t.exclude_urls||[],burke_id:t.burke_id||"",api_endpoint:t.api_endpoint||"",callback:t.callback||null});if(!e.burke_id)return()=>{};if(!e.api_endpoint)return()=>{};const r=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send,i=XMLHttpRequest.prototype.setRequestHeader;function p(s,n){return n.some(a=>{if(a==="/*"||a==="/**")return!0;const f=a.replace(/\*\*\*/g,".*").replace(/\*\*/g,"[^/]*").replace(/\*/g,"[^/]*").replace(/\./g,"\\.").replace(/\//g,"\\/");return new RegExp(`^${f}$`).test(s)})}const c=function(s=6){return Math.random().toString(36).substring(2,s+2)};function u(s){window.parent.postMessage({isBurkeProcessed:!0,recordID:s.id,resultToSave:JSON.stringify(s),apiEndpoint:e.api_endpoint,type:"saveBurkeResult"},"*")}return XMLHttpRequest.prototype.open=function(s,n,a,f,I){this._requestInfo={id:c(),burke_id:e.burke_id,timestamp:new Date().toISOString(),url:n,full_url:n.startsWith("http")?n:window.location.origin+(n.startsWith("/")?"":"/")+n,method:s,async:a!==!1,user:f||null,headers:{},sentData:null,responseData:null,responseHeaders:null,status:null,statusText:null,duration:null,error:null};const _=this._requestInfo.full_url;return this._skipMonitoring=this._isMonitoringRequest||e.exclude_urls.length>0&&p(_,e.exclude_urls)||e.include_urls.length>0&&!p(_,e.include_urls),r.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(s,n){return this._requestInfo&&!this._skipMonitoring&&(this._requestInfo.headers[s]=n),i.apply(this,arguments)},XMLHttpRequest.prototype.send=function(s){return this._requestInfo&&!this._skipMonitoring&&(this._requestInfo.sentData=s,this._requestInfo.sendTimestamp=new Date().toISOString(),this.addEventListener("load",()=>{try{const n=new Date;if(this._requestInfo.duration=n.getTime()-new Date(this._requestInfo.timestamp).getTime(),this._requestInfo.status=this.status,this._requestInfo.statusText=this.statusText,this._requestInfo.responseHeaders=this.getAllResponseHeaders(),this._requestInfo.responseType=this.responseType,this._requestInfo.responseSize=this.responseText?this.responseText.length:null,this._requestInfo.completed=!0,this.responseType===""||this.responseType==="text"){this._requestInfo.responseData=this.responseText;try{(this.responseText.trim().startsWith("{")||this.responseText.trim().startsWith("["))&&(this._requestInfo.parsedResponse=JSON.parse(this.responseText))}catch(a){this._requestInfo.jsonParseError=a.message}}else this.responseType==="json"?(this._requestInfo.responseData=this.response,this._requestInfo.parsedResponse=this.response):this.responseType==="arraybuffer"||this.responseType==="blob"?this._requestInfo.responseData="[Binary data]":this._requestInfo.responseData=this.response;u(this._requestInfo),typeof e.callback=="function"&&e.callback(this._requestInfo)}catch{}}),this.addEventListener("error",()=>{this._requestInfo.error=!0,this._requestInfo.completed=!0,this._requestInfo.errorTimestamp=new Date().toISOString(),u(this._requestInfo),typeof e.callback=="function"&&e.callback(this._requestInfo)}),this.addEventListener("timeout",()=>{this._requestInfo.timedOut=!0,this._requestInfo.completed=!0,this._requestInfo.timeoutTimestamp=new Date().toISOString(),u(this._requestInfo),typeof e.callback=="function"&&e.callback(this._requestInfo)}),this.addEventListener("abort",()=>{this._requestInfo.aborted=!0,this._requestInfo.completed=!0,this._requestInfo.abortTimestamp=new Date().toISOString(),u(this._requestInfo),typeof e.callback=="function"&&e.callback(this._requestInfo)})),o.apply(this,arguments)},function(){return XMLHttpRequest.prototype.open=r,XMLHttpRequest.prototype.send=o,XMLHttpRequest.prototype.setRequestHeader=i,!0}}var E=class{constructor(){}init(){return m(this,null,function*(){return yield H()})}};const j=b(D);let q;(async()=>(q=new j,await q.init()))();
