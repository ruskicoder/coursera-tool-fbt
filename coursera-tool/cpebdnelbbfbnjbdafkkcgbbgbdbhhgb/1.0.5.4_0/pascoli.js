import{g as x}from"./assets/chunk-de833af9.js";var m=(s,i,o)=>new Promise((n,r)=>{var d=l=>{try{u(o.next(l))}catch(c){r(c)}},a=l=>{try{u(o.throw(l))}catch(c){r(c)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(d,a);u((o=o.apply(s,i)).next())});function E(s,i=!1){return new Promise(o=>{chrome.storage.local.get(s,function(n){o(i?n[s]:n)})})}function I(s,i,o=function(){},n="",r=!1,d="",a=!1,u=!1,l="1024px",c="768px",p="",f=!1,y=""){return m(this,null,function*(){let e=document.createElement("iframe");if(e.id=i,e.credentialless=!0,r&&(e.setAttribute("sandbox",""),d!==""&&e.setAttribute("sandbox",d)),n!==""&&e.setAttribute("data-id",n),e.src=s,e.onload=o,y!==""&&(e.referrerPolicy=y),f){let t=document.createElement("iframe"),w=yield E("mllwtl_pascoliFilePath",!0);t.src=chrome.runtime.getURL(w),t.style.display="none",t.id=i,document.body.appendChild(t),t.onload=function(){let h=t.contentWindow;h&&h.postMessage({url:s,id:i,data_id:n,should_sandbox:r,sandbox_attributes:d,htmlVisualizer:a,htmlContained:u,screenWidth:l,screenHeight:c,eventData:p,pascoli:!1,refPolicy:y},"*")}}else if(a)e.style.width=l,e.style.height="0px",e.style.border="none",e.style.opacity="0",document.body.appendChild(e);else if(u){e.style.width=l,e.style.height=c,e.style.border="none",e.style.opacity="0";let t=document.createElement("div");t.style.overflow="hidden",t.appendChild(e),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex="-9999",t.id="div-"+i,document.body.prepend(t)}else e.style.width=l,e.style.height=c,e.style.display="none",document.body.prepend(e)})}function P(){return m(this,null,function*(){let s=!1,i,o;window.addEventListener("message",n=>m(this,null,function*(){let{url:r,id:d,data_id:a,should_sandbox:u,sandbox_attributes:l,htmlVisualizer:c,htmlContained:p,screenWidth:f,screenHeight:y,eventData:e,pascoli:t,refPolicy:w}=n.data;e!==void 0&&(i=JSON.parse(e));let h=d;o=h,yield I(r,d,()=>{var g;if(i.waitForElement==="none"){let v=document.getElementById(h);v&&((g=v==null?void 0:v.contentWindow)==null||g.postMessage(i,"*"))}},a,u,l,c,p,f,y,e,!1,w)})),window.addEventListener("message",n=>{if(n.data.isMCrawl&&(s=!0),n.data.waitForElementIsNotNone){window.parent.postMessage({isMReply:!0,recordID:n.data.recordID},"*");let r=setInterval(function(){var d;let a=document.getElementById(o);if(s){clearInterval(r);return}a&&((d=a==null?void 0:a.contentWindow)==null||d.postMessage(i,"*"))},50)}})})}var C=class{constructor(){}init(){return m(this,null,function*(){return yield P()})}},M=C;const _=x(M);let b;(async()=>(b=new _,await b.init()))();
